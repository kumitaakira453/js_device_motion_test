<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>加速度の値を得る</title>
</head>

<body>
    <p>加速度センサー</p>
    <div id="result_acc">ここにデータを表示</div>
    <p>ジャイロセンサー</p>
    <div id="result_gyro">ここにデータを表示</div>

    <script>
        var aX = 0, aY = 0, aZ = 0;                     // 加速度の値を入れる変数を3個用意
        var alpha = 0, beta = 0, gamma = 0;

        // 加速度センサの値が変化したら実行される devicemotion イベント
        window.addEventListener("devicemotion", (dat) => {
            aX = dat.accelerationIncludingGravity.x;    // x軸の重力加速度（Android と iOSでは正負が逆）
            aY = dat.accelerationIncludingGravity.y;    // y軸の重力加速度（Android と iOSでは正負が逆）
            aZ = dat.accelerationIncludingGravity.z;    // z軸の重力加速度（Android と iOSでは正負が逆）
        });
        // ジャイロセンサー
        window.addEventListener("deviceorientation", (event) => {
            alpha = event.alpha;
            beta = event.beta;
            gamma = event.gamma;

            var result2 = document.getElementById("result_gyro");
            result2.innerHTML = "ジャイロセンサー<br />" +
                "alpha：" + alpha.toFixed(2) + "°<br />" +
                "beta ：" + beta.toFixed(2) + "°<br />" +
                "gamma：" + gamma.toFixed(2) + "°<br />";
        }, false);

        // 指定時間ごとに繰り返し実行される setInterval(実行する内容, 間隔[ms]) タイマーを設定
        var timer = window.setInterval(() => {
            displayData();      // displayData 関数を実行
        }, 33); // 33msごとに（1秒間に約30回）

        function displayData() {
            var resultAcc = document.getElementById("result_acc");
            resultAcc.innerHTML = "x: " + aX + "<br>"         // x軸の値
                + "y: " + aY + "<br>"         // y軸の値
                + "z: " + aZ;                 // z軸の値
            var resultGyro = document.getElementById("result_gyro");
            resultGyro.innerHTML = "alpha: " + alpha + "<br>"
                + "beta: " + beta + "<br>"
                + "gamma: " + gamma;
        }
    </script>

</body>

</html>